<header class="app-header">
  <div class="header-logo">P</div>
  
  <!-- Desktop Navigation Menu - Authenticated -->
  <nav class="header-nav" *ngIf="isAuthenticated">
    <ul class="main-nav-menu">
      <ng-container *ngFor="let item of mainNavItems">
        <li class="main-nav-item" *appHasAccess="item.permission">
          <a 
            [routerLink]="item.route"
            [class.active]="isActive(item.route)"
            class="main-nav-link">
            <span class="nav-icon">{{ item.icon }}</span>
            <span class="nav-label">{{ item.label }}</span>
          </a>
        </li>
      </ng-container>
    </ul>
  </nav>

  <!-- Desktop Navigation Menu - Public -->
  <nav class="header-nav" *ngIf="!isAuthenticated">
    <ul class="main-nav-menu">
      <ng-container *ngFor="let item of publicNavItems">
        <li class="main-nav-item">
          <a 
            [routerLink]="item.route"
            [class.active]="isActive(item.route)"
            class="main-nav-link">
            <span class="nav-icon">{{ item.icon }}</span>
            <span class="nav-label">{{ item.label }}</span>
          </a>
        </li>
      </ng-container>
    </ul>
  </nav>

  <!-- Mobile Hamburger Button -->
  <button class="hamburger-btn" (click)="toggleMobileMenu()" title="Toggle Menu">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>

  <div class="header-actions">
    <!-- Chat Agent Icon - Only for Authenticated -->
    <button class="icon-btn" title="Open Chat Agent" (click)="toggleChatPanel($event)" *ngIf="isAuthenticated">
      üí¨
    </button>

    <!-- Notifications Icon - Only for Authenticated -->
    <div style="position: relative;" *ngIf="isAuthenticated">
      <button class="icon-btn" (click)="toggleNotifications($event)" title="Notifications">
        üîî
        <span class="badge-counter" *ngIf="unreadNotificationCount > 0">
          {{ unreadNotificationCount }}
        </span>
      </button>
      
      <div class="notifications-panel" *ngIf="showNotifications" #notificationsMenu>
        <div style="padding: 10px; border-bottom: 1px solid #e9ecef; font-weight: 500;">
          Notifications
        </div>
        <div class="notification-item unread">
          <div class="notification-dot"></div>
          <div class="notification-content">
            <div class="notification-title">Welcome</div>
            <div class="notification-message">Welcome back to your dashboard</div>
            <div class="notification-time">Just now</div>
          </div>
        </div>
        <div class="notification-item unread">
          <div class="notification-dot"></div>
          <div class="notification-content">
            <div class="notification-title">New Project</div>
            <div class="notification-message">A new project has been assigned to you</div>
            <div class="notification-time">1 hour ago</div>
          </div>
        </div>
        <div class="notification-item">
          <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #ccc; margin-top: 8px;"></div>
          <div class="notification-content">
            <div class="notification-title">System Update</div>
            <div class="notification-message">System will undergo maintenance tonight</div>
            <div class="notification-time">1 day ago</div>
          </div>
        </div>
      </div>
    </div>

    <!-- User Icon with Menu -->
    <div style="position: relative;">
      <button class="icon-btn" (click)="toggleUserMenu($event)" title="User Menu">
        üë§
      </button>
      
      <div class="user-menu" *ngIf="showUserMenu" #userMenu>
        <!-- Authenticated Menu -->
        <ng-container *ngIf="isAuthenticated">
          <a href="#profile">üë§ Profile</a>
          <a href="#settings">‚öôÔ∏è Settings</a>
          <a href="#help">‚ùì Help</a>
          <div class="divider"></div>
          <button (click)="logout()" style="cursor: pointer;">üö™ Logout</button>
        </ng-container>
        
        <!-- Public Menu -->
        <ng-container *ngIf="!isAuthenticated">
          <a [routerLink]="'/login'" (click)="showUserMenu = false">üîê Login</a>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation Menu - Authenticated -->
  <nav class="mobile-menu" [class.active]="showMobileMenu" *ngIf="isAuthenticated">
    <ul class="mobile-nav-menu">
      <ng-container *ngFor="let item of mainNavItems">
        <li class="mobile-nav-item" *appHasAccess="item.permission">
          <a 
            [routerLink]="item.route"
            [class.active]="isActive(item.route)"
            class="mobile-nav-link"
            (click)="showMobileMenu = false">
            <span class="nav-icon">{{ item.icon }}</span>
            <span class="nav-label">{{ item.label }}</span>
          </a>
        </li>
      </ng-container>
    </ul>
  </nav>

  <!-- Mobile Navigation Menu - Public -->
  <nav class="mobile-menu" [class.active]="showMobileMenu" *ngIf="!isAuthenticated">
    <ul class="mobile-nav-menu">
      <ng-container *ngFor="let item of publicNavItems">
        <li class="mobile-nav-item">
          <a 
            [routerLink]="item.route"
            [class.active]="isActive(item.route)"
            class="mobile-nav-link"
            (click)="showMobileMenu = false">
            <span class="nav-icon">{{ item.icon }}</span>
            <span class="nav-label">{{ item.label }}</span>
          </a>
        </li>
      </ng-container>
    </ul>
  </nav>
</header>
